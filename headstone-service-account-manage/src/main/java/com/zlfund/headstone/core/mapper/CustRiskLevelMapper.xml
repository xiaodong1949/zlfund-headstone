<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zlfund.headstone.core.mapper.CustRiskLevelMapper">
	<select id="queryNotSetCustRiskLevel" resultType="boolean">
		select NOT EXISTS (SELECT 1 FROM CUSTRISKLEVEL WHERE CUSTNO = #{custno})
	</select>
	<insert id="saveCustRiskLevel" statementType="CALLABLE">
		INSERT INTO CUSTRISKLEVEL(
			CUSTNO,
			RISKLEVEL,
			EVALDATE,
			EVALTIME,
			STATUS
		)VALUES(
			#{custno},
			'0', --0表示未进行风险测评
			TO_CHAR(CURRENT_TIMESTAMP,'YYYYMMDD'),
			TO_CHAR(CURRENT_TIMESTAMP,'HH24MISS'),
			'N'
		);
	</insert>
</mapper>